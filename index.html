<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>NyaGPT</title>

<style>
:root {
  --bg: #0b0b0f;
  --panel: #15151c;
  --accent: #ff7ac8;
  --user: #7dd3fc;
  --bot: #c084fc;
  --text: #ffffff;
  --muted: #9ca3af;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  height: 100vh;
  display: flex;
  justify-content: center;
}

.app {
  width: 100%;
  max-width: 520px;
  display: flex;
  flex-direction: column;
  height: 100vh;
}

/* HEADER */
.header {
  padding: 14px;
  background: var(--panel);
  text-align: center;
  font-weight: 600;
  font-size: 18px;
  border-bottom: 1px solid #23232e;
}

/* MODE SELECT */
.mode {
  padding: 10px;
  background: var(--panel);
  border-bottom: 1px solid #23232e;
}

select {
  width: 100%;
  padding: 10px;
  border-radius: 12px;
  background: #0f0f14;
  color: white;
  border: 1px solid #2a2a3a;
  font-size: 15px;
}

/* CHAT */
.chat {
  flex: 1;
  overflow-y: auto;
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* MESSAGES */
.msg {
  max-width: 85%;
  padding: 10px 14px;
  border-radius: 14px;
  line-height: 1.4;
  word-wrap: break-word;
}

.user {
  align-self: flex-end;
  background: #1e293b;
  color: var(--user);
  border-bottom-right-radius: 4px;
}

.bot {
  align-self: flex-start;
  background: #1b1430;
  color: var(--bot);
  border-bottom-left-radius: 4px;
}

/* INPUT */
.input {
  display: flex;
  gap: 8px;
  padding: 12px;
  background: var(--panel);
  border-top: 1px solid #23232e;
}

input {
  flex: 1;
  padding: 12px;
  border-radius: 14px;
  border: 1px solid #2a2a3a;
  background: #0f0f14;
  color: white;
  font-size: 15px;
}

button {
  padding: 0 18px;
  border-radius: 14px;
  border: none;
  background: var(--accent);
  color: black;
  font-weight: 600;
  font-size: 15px;
}

button:active {
  transform: scale(0.96);
}

/* SCROLLBAR (–ü–ö) */
.chat::-webkit-scrollbar {
  width: 6px;
}
.chat::-webkit-scrollbar-thumb {
  background: #2a2a3a;
  border-radius: 10px;
}
</style>
</head>

<body>
<div class="app">

  <div class="header">üê± NyaGPT</div>

  <div class="mode">
    <select id="mode">
      <option value="nya">üê± Nya Mode</option>
      <option value="normal">üß† Normal</option>
      <option value="philosopher">üé≠ Philosopher</option>
      <option value="bestie">üòè Bestie</option>
      <option value="study">üßë‚Äçüè´ Study</option>
      <option value="creative">üîÆ Creative</option>
    </select>
  </div>

  <div id="chat" class="chat">
    <div class="msg bot">–ü—Ä–∏–≤–µ—Ç! –Ø NyaGPT üò∏ –ù–∞–ø–∏—à–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å</div>
  </div>

  <div class="input">
    <input id="text" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶" />
    <button onclick="send()">‚û§</button>
  </div>

</div>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("text");

function addMessage(text, type) {
  const div = document.createElement("div");
  div.className = "msg " + type;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

async function send() {
  const text = input.value.trim();
  const mode = document.getElementById("mode").value;
  if (!text) return;

  addMessage(text, "user");
  input.value = "";

  try {
    const res = await fetch("https://nyagpt-server.vercel.app/api/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: text, mode })
    });

    const data = await res.json();

    if (data.reply) {
      addMessage(data.reply, "bot");
    } else {
      addMessage("‚ö†Ô∏è –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞", "bot");
    }

  } catch (e) {
    addMessage("‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è", "bot");
  }
}

// Enter –¥–ª—è –ü–ö
input.addEventListener("keydown", e => {
  if (e.key === "Enter") send();
});
</script>

</body>
</html>
